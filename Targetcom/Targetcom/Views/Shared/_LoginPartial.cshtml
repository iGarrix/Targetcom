@using Microsoft.AspNetCore.Identity

@inject UserManager<IdentityUser> UserManager
@{ 
    Profile profile = await UserManager.GetUserAsync(User) as Profile;
    string role = UserManager.GetRolesAsync(profile).Result.ToList()[0];
}

<style>
 button[type=button], .dropdown-menu a, .dropdown-menu button[type=submit] {
     font-family: 'Poppins', sans-serif;
     letter-spacing: .3px;
     outline: 0!important;
 }
 .dropdown-item:hover {
     background-color: #f6f6f6;
 }
 .dropdown-item:active {
     background-color:#e6e6e6;
 }
</style>
<div class="btn-group">
    <button type="button" class="bg-transparent dropdown-toggle border-0 day_color_main d-inline-flex align-items-center" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="font-size: 14px; height: 54px;">
        <span class="align-items-center">@profile.Name</span>
        @if (profile.UrlAvatar == Targetcom.Env.DefaultImageUrl)
        {
            <img src="@Env.DefaultImageUrl" alt="Avatar" class="img-card rounded-circle bg-dark d-inline-block ml-2 mr-1" style="height: 32px; width: 32px;" />
        }
        else
        {
            <img src="@profile.UrlAvatar" alt="Avatar" class="img-card rounded-circle bg-dark d-inline-block ml-2 mr-1" style="height: 32px; width: 32px;" />
        }
    </button>
    <div class="dropdown-menu" style="font-size: 14px; min-width: 13rem; z-index: 100;">
        <a class="dropdown-item" asp-action="Index" asp-controller="Profile">
            <div class="d-flex align-items-center">
                @if (profile.UrlAvatar == Targetcom.Env.DefaultImageUrl)
                {
                    <img src="@Env.DefaultImageUrl" alt="Avatar" class="img-card rounded rounded-circle" style="height: 36px; width: 36px;" />
                }
                else
                {
                    <img src="@profile.UrlAvatar" alt="Avatar" class="img-card rounded rounded-circle" style="height: 36px; width: 36px;" />
                }
                <div class="ml-2">
                    <p class="day_color_main m-0">@profile.Name @profile.Surname</p>
                    <p class="text-muted font-weight-lighter m-0">Go to profile</p>
                </div>
            </div>
        </a>
        <div class="dropdown-divider"></div>
        @if (role == Env.AdminRole)
        {
            <a class="dropdown-item rounded-0 d-flex align-items-center text-dark" href="#">Root panel</a>
        }
        <a class="dropdown-item rounded-0 d-flex align-items-center text-dark" id="manage" asp-area="Identity" asp-page="/Account/Manage/Index">Settings</a>
        <a class="dropdown-item rounded-0 d-flex align-items-center text-dark" href="#">Help</a>
        <div class="dropdown-divider"></div>
        <form id="logoutForm" class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
            <button id="logout" type="submit" class="dropdown-item rounded-0 d-flex align-items-center text-dark">Logout</button>
        </form>
    </div>
</div>
